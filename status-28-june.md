# ××¡××š ××¤×™×•×Ÿ ××¢×¨×›×ª ×›×™×ª×ª×™×ª ××™× ×˜×¨××§×˜×™×‘×™×ª - ×’×¨×¡×” 4.7 (×‘×¤×™×ª×•×—)

**×ª××¨×™×š ×¢×“×›×•×Ÿ:** 28/06/2025  
**×¡×˜×˜×•×¡:** 85% Complete - ×‘×¢×“×›×•×Ÿ ×œ××¢×¨×›×ª AI ×“×™× ××™×ª  
**×’×¨×¡×”:** 4.7 - ChatGPT ×›×‘×¨×™×¨×ª ××—×“×œ + ×ª×¤×¨×™×˜ ×‘×—×™×¨×ª AI ×œ××•×¨×”

---

## ğŸš¨ ××¦×‘ × ×•×›×—×™ - ×¢×“×›×•× ×™× ×—×“×©×™×

### âœ… ××” ×©×¢×•×‘×“:
1. **××¢×¨×›×ª ×‘×¡×™×¡×™×ª** - ×¦'××˜, ×ª×œ××™×“×™×, ×ª×›× ×™× - ×¤×•×¢×œ ××¦×•×™×Ÿ
2. **×§×•×“×™ ×—×“×¨ 4 ×¡×¤×¨×•×ª** - ×™×¦×™×‘ ×•××•×›×—
3. **Real-time sync** - ×¢×“×›×•× ×™× ××™×™×“×™×™× ×œ×›×•×œ×

### ğŸ”§ ×‘×¢×‘×•×“×” - ×©×™×¤×•×¨×™× ×—×“×©×™×:
1. **×ª×™×§×•×Ÿ ×—×™×‘×•×¨ AI** - ××¢×‘×¨ ×œ××™×¨×•×¤×” + Remote Config ×“×™× ××™
2. **ChatGPT ×›×‘×¨×™×¨×ª ××—×“×œ** - ×‘××§×•× Gemini
3. **×ª×¤×¨×™×˜ ×‘×—×™×¨×ª AI ×œ××•×¨×”** - ChatGPT/Claude/Gemini ×“×™× ××™
4. **×¤×•× ×§×¦×™×™×ª askAI ××¨×›×–×™×ª** - ×‘×©×¨×ª, ×§×•×¨××ª ×”×’×“×¨×•×ª ×”×—×“×¨

### ğŸ¯ ×”×©×™× ×•×™×™× ×”×—×“×©×™×:
- **×œ××•×¨×”:** ×ª×¤×¨×™×˜ ×œ×‘×—×™×¨×ª AI (ChatGPT/Claude/Gemini)
- **×›×©××—×œ×™×£:** ×”×©×¨×ª ××¢×“×›×Ÿ ××ª ×”×’×“×¨×•×ª ×”×—×“×¨
- **×œ×›×•×œ×:** ×›×œ ×”×ª×œ××™×“×™× ××§×‘×œ×™× ××ª ××•×ª×• AI ×©×”××•×¨×” ×‘×—×¨
- **×“×™× ××™:** ×”×—×œ×¤×” ×‘×–××Ÿ ×××ª ×‘×œ×™ ×œ×¨×¢× ×Ÿ

---

## ğŸŒ ××¨×›×™×˜×§×˜×•×¨×” ×—×“×©×” - ××¢×‘×¨ ×œ××™×¨×•×¤×”

### ×©×™×¨×•×ª×™ Firebase:
- **ğŸ‡ªğŸ‡º Functions:** `europe-west1` (×‘×œ×’×™×”) - ×¢×“×›×•×Ÿ ×“×™× ××™ ×“×¨×š Remote Config
- **ğŸ‡®ğŸ‡± Firestore:** `me-west1` (×ª×œ ××‘×™×‘) 
- **ğŸ”§ Remote Config:** ×”×’×“×¨×•×ª ×“×™× ××™×•×ª ×œ××–×•×¨×™× ×•××•×“×œ×™ AI

### ğŸ—ï¸ ××‘× ×” ×”×¤×•× ×§×¦×™×•×ª ×”××¢×•×“×›×Ÿ:
```
Firebase Functions (europe-west1):
â”œâ”€â”€ askAI âœ… ×¤×•× ×§×¦×™×” ××¨×›×–×™×ª - ×§×•×¨××ª ×”×’×“×¨×•×ª ×”×—×“×¨ ×•×‘×•×—×¨×ª ××•×“×œ
â”œâ”€â”€ askGemini âœ… ×¤×•×¢×œ (×¨×§ ×œ×©×¨×ª, ×œ× × ×§×¨× ×™×©×™×¨×•×ª)
â”œâ”€â”€ askClaude âœ… ×¤×•×¢×œ (×¨×§ ×œ×©×¨×ª, ×œ× × ×§×¨× ×™×©×™×¨×•×ª)  
â”œâ”€â”€ askChatGPT âœ… ×¤×•×¢×œ (×¨×§ ×œ×©×¨×ª, ×œ× × ×§×¨× ×™×©×™×¨×•×ª)
â””â”€â”€ cleanupOldClassrooms âœ… ×¤×•×¢×œ
```

**ğŸ”„ ×”×©×™× ×•×™ ×”×—×“×©:** Client ×§×•×¨× ×¨×§ ×œ-`askAI`, ×”×©×¨×ª ×‘×•×—×¨ ××ª ×”××•×“×œ ×œ×¤×™ ×”×’×“×¨×•×ª ×”×—×“×¨.

---

## 1. ×—×–×•×Ÿ ×•××˜×¨×” (×œ×œ× ×©×™× ×•×™)

××¢×¨×›×ª ×›×™×ª×ª×™×ª ×™×¦×™×‘×” ×”××‘×•×¡×¡×ª ×¢×œ Firebase, ×©×‘×” ×›×œ ××•×¨×” ××§×‘×œ ×§×•×“ ×—×“×¨ ×™×™×—×•×“×™ ×‘×Ÿ 4 ×¡×¤×¨×•×ª. ×”×ª×œ××™×“×™× ××¦×˜×¨×¤×™× ×‘×××¦×¢×•×ª ×”×§×•×“ ×”×¤×©×•×˜, ×œ×œ× ×¦×•×¨×š ×‘×”×œ×™×›×™ ×”×¨×©××” ××•×¨×›×‘×™×.

**×”××˜×¨×” ×”×¢×™×§×¨×™×ª:** ××¢×¨×›×ª ×¤×©×•×˜×”, ×××™× ×” ×•××”×™×¨×” ×©××ª××™××” ×œ×›×œ ×¡×‘×™×‘×ª ×œ×™××•×“.

**×”×ª×›×•× ×•×ª ×”××•×›×—×•×ª:**
- âœ¨ **×§×•×“×™ ×—×“×¨ 4 ×¡×¤×¨×•×ª** - ×¤×©×•×˜ ×œ×–×›×•×¨ ×•×œ×”×–×™×Ÿ
- ğŸ¤– **AI Control Panel ××ª×§×“×** - ×‘×—×™×¨×ª ××•×“×œ ×“×™× ××™×ª ×œ××•×¨×” ğŸ”§ ×‘×¤×™×ª×•×—
- ğŸ“± **Real-time Everything** - ×¢×“×›×•× ×™× ××™×™×“×™×™× âœ… ×¢×•×‘×“
- ğŸ”„ **Auto-cleanup** - × ×™×§×•×™ ××•×˜×•××˜×™ ×©×œ ×—×“×¨×™× ×™×©× ×™× âœ… ×¢×•×‘×“
- ğŸ’¬ **Chat Interface** - ×××©×§ ×¦'××˜ ×¦×£ ×•× ×’×™×© âœ… ×¢×•×‘×“
- ğŸ® **Content Control** - ×©×œ×™×—×ª ××©×—×§×™× ×•×ª×›× ×™× âœ… ×¢×•×‘×“

---

## 2. ××¨×›×™×˜×§×˜×•×¨×ª Firebase ×”××¢×•×“×›× ×ª

### 2.1 Firebase Services

#### **Firestore Database (NoSQL Real-time)** âœ… ×¢×•×‘×“
××‘× ×” ×”× ×ª×•× ×™× ××¢×•×“×›×Ÿ - ×¢× ×ª××™×›×” ×‘×‘×—×™×¨×ª AI:
```
ğŸ“Š ××‘× ×” ×”× ×ª×•× ×™× ×”××¢×•×“×›×Ÿ:
rooms/
  â””â”€â”€ {4-digit-code}/ (×§×•×“ ×”×—×“×¨ - 4 ×¡×¤×¨×•×ª)
      â”œâ”€â”€ room_code: string             // ×§×•×“ ×”×—×“×¨
      â”œâ”€â”€ created_at: timestamp         // ×–××Ÿ ×™×¦×™×¨×”
      â”œâ”€â”€ last_activity: timestamp      // ×¤×¢×™×œ×•×ª ××—×¨×•× ×”
      â”œâ”€â”€ teacher_uid: string           // ××–×”×” ×”××•×¨×”
      â”œâ”€â”€ settings: object              // ×”×’×“×¨×•×ª ×”×—×“×¨
      â”‚   â”œâ”€â”€ ai_active: boolean        // ×©×œ×™×˜×ª AI ××¨×›×–×™×ª
      â”‚   â”œâ”€â”€ ai_model: string          // ğŸ†• ChatGPT/Claude/Gemini
      â”‚   â””â”€â”€ current_command: object   // ×¤×§×•×“×•×ª ×œ××™×œ×•×™ ××™×™×“×™
      â”œâ”€â”€ students/                     // ×§×•×œ×§×¦×™×™×ª ×ª×œ××™×“×™×
      â”‚   â””â”€â”€ {studentUID}/
      â”‚       â”œâ”€â”€ uid: string
      â”‚       â”œâ”€â”€ name: string
      â”‚       â””â”€â”€ joined_at: timestamp
      â””â”€â”€ messages/                     // ×§×•×œ×§×¦×™×™×ª ×”×•×“×¢×•×ª
          â””â”€â”€ {messageID}/
              â”œâ”€â”€ sender: string
              â”œâ”€â”€ sender_uid: string
              â”œâ”€â”€ content: string
              â”œâ”€â”€ timestamp: timestamp
              â”œâ”€â”€ is_teacher: boolean
              â”œâ”€â”€ is_private: boolean    // ×”×•×“×¢×” ×¤×¨×˜×™×ª?
              â””â”€â”€ recipient_uid: string  // × ××¢×Ÿ (×œ×”×•×“×¢×•×ª ×¤×¨×˜×™×•×ª)
```

#### **Remote Config** ğŸ”§ ××¢×•×“×›×Ÿ
```javascript
// ×”×’×“×¨×ª Remote Config ×‘ClassroomSDK:
constructor() {
    this.remoteConfig = firebase.remoteConfig();
    this.remoteConfig.defaultConfig = {
        'functions_region': 'europe-west1',      // ×‘×¨×™×¨×ª ××—×“×œ ×—×“×©×”
        'default_ai_model': 'chatgpt',          // ğŸ†• ×‘×¨×™×¨×ª ××—×“×œ ChatGPT
        'available_ai_models': 'chatgpt,claude,gemini'  // ğŸ†• ××•×“×œ×™× ×–××™× ×™×
    };
}
```

#### **Cloud Functions (europe-west1)** âœ… ××¢×•×“×›×Ÿ
```javascript
// ×”×¤×•× ×§×¦×™×” ×”××¨×›×–×™×ª ×”×—×“×©×” - askAI
exports.askAI = onCall({
  region: DEPLOY_REGION,
  secrets: [geminiApiKey, claudeApiKey, openaiApiKey]
}, async (request) => {
  // 1. ×§×¨×™××” ×œ×”×’×“×¨×•×ª ×”×—×“×¨
  const roomCode = request.data.roomCode;
  const roomRef = admin.firestore().collection('rooms').doc(roomCode);
  const roomDoc = await roomRef.get();
  
  // 2. ×‘×—×™×¨×ª ××•×“×œ ×œ×¤×™ ×”×’×“×¨×•×ª ×”××•×¨×”
  const selectedModel = roomDoc.data().settings?.ai_model || 'chatgpt';
  
  // 3. ×”×¢×‘×¨×” ×œ×¤×•× ×§×¦×™×” ×”× ×›×•× ×”
  switch (selectedModel) {
    case 'chatgpt': return await askChatGPT(request);
    case 'claude': return await askClaude(request);
    case 'gemini': return await askGemini(request);
    default: return await askChatGPT(request); // ChatGPT ×›×‘×¨×™×¨×ª ××—×“×œ
  }
});
```

### 2.2 Firebase Configuration (×œ×œ× ×©×™× ×•×™)
```javascript
const firebaseConfig = {
  apiKey: "AIzaSyDhpyO6ED4_BXb2foIl43ytQi6CtHJR1nc",
  authDomain: "classroom-server.firebaseapp.com",
  projectId: "classroom-server",
  storageBucket: "classroom-server.firebasestorage.app",
  messagingSenderId: "416469978718",
  appId: "1:416469978718:web:648403c32125787782aecf"
};
```

---

## 3. ×¨×›×™×‘×™ ×”××¢×¨×›×ª - ××¢×•×“×›× ×™×

### 3.1 ××¤×œ×™×§×¦×™×™×ª ×”××•×¨×” (Teacher Dashboard) ğŸ”§ ××¢×•×“×›× ×ª

#### **×ª×›×•× ×•×ª ×—×“×©×•×ª:**
- âœ… **××¨×›×– ×‘×§×¨×”:** ×§×•×“ ×—×“×¨, ×¡×˜×˜×™×¡×˜×™×§×•×ª, ×¨×©×™××ª ×ª×œ××™×“×™×
- âœ… **××¢×¨×›×ª ×ª×§×©×•×¨×ª:** ×¦'××˜, ×”×•×“×¢×•×ª ××”×™×¨×•×ª, ×”×•×“×¢×•×ª ×¤×¨×˜×™×•×ª  
- âœ… **× ×™×”×•×œ ×ª×›× ×™×:** ××©×—×§×™×, ×ª×›× ×™× ××•×ª×××™×, ×‘×§×¨×” ××œ××”
- ğŸ†• **AI Control Panel ××ª×§×“×:** ×ª×¤×¨×™×˜ ×‘×—×™×¨×ª ××•×“×œ + ×”×¤×¢×œ×”/×›×™×‘×•×™
- âœ… **×›×œ×™× ××ª×§×“××™×:** ××™×¤×•×¡, ×™×™×¦×•×, debug

#### **×ª×¤×¨×™×˜ AI ×”×—×“×©:**
```javascript
// ×ª×¤×¨×™×˜ ×‘×—×™×¨×ª AI ×œ××•×¨×”
const aiModels = [
    { id: 'chatgpt', name: 'ChatGPT', icon: 'ğŸ¤–', desc: '××•×“×œ ××ª×§×“× ×OpenAI' },
    { id: 'claude', name: 'Claude', icon: 'ğŸ§ ', desc: '××•×“×œ ×—×›× ×Anthropic' },
    { id: 'gemini', name: 'Gemini', icon: 'âœ¨', desc: '××•×“×œ ×©×œ Google' }
];

// ×›×©××•×¨×” ×‘×•×—×¨ ××•×“×œ
async selectAIModel(modelId) {
    await this.sdk.updateRoomSetting('ai_model', modelId);
    this.showAIModelChangeNotification(modelId);
}
```

### 3.2 ××¤×œ×™×§×¦×™×™×ª ×”×ª×œ××™×“ (Student App) âœ… ××¢×•×“×›× ×ª

#### **×©×™× ×•×™×™× ×‘×¦×“ ×”×ª×œ××™×“:**
- âœ… **××¡×š ×›× ×™×¡×”:** Anonymous Authentication + validation
- âœ… **Host Page:** iFrame ××œ× + ×××©×§ ×¦×£
- ğŸ†• **AI ×“×™× ××™:** ××§×‘×œ ××•×“×œ AI ×œ×¤×™ ×‘×—×™×¨×ª ×”××•×¨×”
- ğŸ”§ **×—×™×‘×•×¨ ×œaskAI:** ×§×•×¨× ×¨×§ ×œ×¤×•× ×§×¦×™×” ×”××¨×›×–×™×ª

### 3.3 ClassroomSDK.js - ××¢×•×“×›×Ÿ ×œ×—×œ×•×˜×™×Ÿ ğŸ”„

#### **×©×™× ×•×™×™× ×¢×™×§×¨×™×™×:**
```javascript
class ClassroomSDK {
    constructor() {
        // ğŸ”§ ×ª×™×§×•×Ÿ ×—×™×‘×•×¨ ×“×™× ××™ ×œ××™×¨×•×¤×”
        this.initializeRemoteConfig();
    }
    
    // ğŸ†• ××ª×—×•×œ Remote Config ×“×™× ××™
    async initializeRemoteConfig() {
        await this.remoteConfig.fetchAndActivate();
        const region = this.remoteConfig.getValue('functions_region').asString();
        this.functions = firebase.app().functions(region);
        console.log(`ğŸŒ Connected to Functions: ${region}`);
    }
    
    // ğŸ”„ ×¢×“×›×•×Ÿ sendAIMessage - ×¨×§ askAI
    async sendAIMessage(prompt) {
        const askAIFunction = this.functions.httpsCallable('askAI');
        const result = await askAIFunction({
            prompt: prompt,
            roomCode: this.roomCode  // ğŸ†• ×©×œ×™×—×ª ×§×•×“ ×”×—×“×¨
        });
        return result.data;
    }
    
    // ğŸ†• ×¤×•× ×§×¦×™×” ×—×“×©×” ×œ×¢×“×›×•×Ÿ ××•×“×œ AI (×¨×§ ×œ××•×¨×”)
    async updateAIModel(modelId) {
        if (!this.isTeacher) throw new Error('Only teachers can change AI model');
        
        const roomRef = this.db.collection('rooms').doc(this.roomCode);
        await roomRef.update({
            'settings.ai_model': modelId,
            'last_activity': firebase.firestore.FieldValue.serverTimestamp()
        });
        
        console.log(`ğŸ¤– AI model changed to: ${modelId}`);
    }
}
```

---

## 4. ×ª×”×œ×™×š ×”×¢×‘×•×“×” ×”××¢×•×“×›×Ÿ

### 4.1 ×”××•×¨×”: âœ… ×¢×•×‘×“ + ×ª×›×•× ×•×ª ×—×“×©×•×ª
1. **×¤×ª×™×—×ª ×”××¢×¨×›×ª:** âœ… × ×›× ×¡ ×œ-index.html
2. **×§×‘×œ×ª ×§×•×“:** âœ… ×”××¢×¨×›×ª ×™×•×¦×¨×ª ×§×•×“ 4 ×¡×¤×¨×•×ª ×™×™×—×•×“×™
3. **×‘×—×™×¨×ª AI:** ğŸ†• ×‘×•×—×¨ ××•×“×œ AI ××ª×¤×¨×™×˜ (ChatGPT ×‘×¨×™×¨×ª ××—×“×œ)
4. **×”×¢×‘×¨×ª ×§×•×“:** âœ… ××¢×‘×™×¨ ××ª ×”×§×•×“ ×œ×ª×œ××™×“×™×
5. **× ×™×”×•×œ ×”×©×™×¢×•×¨:** âœ… ×ª×›× ×™× ×•×”×•×“×¢×•×ª + ğŸ†• ×©×œ×™×˜×” ×“×™× ××™×ª ×‘-AI

### 4.2 ×”×ª×œ××™×“: âœ… ×¢×•×‘×“ + AI ×“×™× ××™
1. **×¤×ª×™×—×ª ×”××¤×œ×™×§×¦×™×”:** âœ… × ×›× ×¡ ×œ-student-app.html
2. **×”×–× ×ª ×¤×¨×˜×™×:** âœ… ×©× + ×§×•×“ ×—×“×¨ 4 ×¡×¤×¨×•×ª
3. **×”×¦×˜×¨×¤×•×ª:** âœ… ××ª×—×‘×¨ ××•×˜×•××˜×™×ª ×œ×—×“×¨
4. **×œ××™×“×”:** âœ… ×ª×›× ×™× ×•×¦'××˜ + ğŸ†• AI ×œ×¤×™ ×‘×—×™×¨×ª ×”××•×¨×”

---

## 5. ××” ××¢×•×“×›×Ÿ ×’×¨×¡×” 4.7

### 5.1 ×ª×™×§×•×Ÿ ×—×™×‘×•×¨ AI - ×¢×“×™×¤×•×ª ×’×‘×•×”×” ğŸ”¥
```javascript
// ×‘ClassroomSDK.js - ×ª×™×§×•×Ÿ ××œ×
async initializeRemoteConfig() {
    try {
        await this.remoteConfig.fetchAndActivate();
        const region = this.remoteConfig.getValue('functions_region').asString();
        
        console.log(`ğŸŒ ×¢×“×›×•×Ÿ ××–×•×¨ Functions ×œ: ${region}`);
        this.functions = firebase.app().functions(region);
        
        // ××™××•×ª ×—×™×‘×•×¨
        await this.testConnection();
        
    } catch (error) {
        console.error('ğŸ”¥ ×©×’×™××” ×‘×˜×¢×™× ×ª Remote Config:', error);
        // fallback ×œ××™×¨×•×¤×”
        this.functions = firebase.app().functions('europe-west1');
    }
}
```

### 5.2 ChatGPT ×›×‘×¨×™×¨×ª ××—×“×œ - ×¢×“×™×¤×•×ª ×’×‘×•×”×” ğŸ”„
```javascript
// ×‘×¤×•× ×§×¦×™×™×ª askAI - ChatGPT ×¨××©×•×Ÿ
const selectedModel = roomDoc.data().settings?.ai_model || 'chatgpt';

// ×‘Remote Config
'default_ai_model': 'chatgpt'

// ×‘×××©×§ ×”××•×¨×”
defaultAiModel: 'chatgpt'
```

### 5.3 ×ª×¤×¨×™×˜ ×‘×—×™×¨×ª AI ×œ××•×¨×” - ×ª×›×•× ×” ×—×“×©×” âœ¨
```javascript
// Teacher Dashboard - ×ª×¤×¨×™×˜ AI ××ª×§×“×
createAISelectionMenu() {
    const aiMenu = `
        <div class="ai-model-selector">
            <h3>ğŸ¤– ×‘×—×¨ ××•×“×œ AI ×œ×›×™×ª×”</h3>
            <div class="ai-options">
                <div class="ai-option" data-model="chatgpt">
                    <span class="ai-icon">ğŸ¤–</span>
                    <div class="ai-info">
                        <div class="ai-name">ChatGPT</div>
                        <div class="ai-desc">××•×“×œ ××ª×§×“× ×OpenAI</div>
                    </div>
                </div>
                <div class="ai-option" data-model="claude">
                    <span class="ai-icon">ğŸ§ </span>
                    <div class="ai-info">
                        <div class="ai-name">Claude</div>
                        <div class="ai-desc">××•×“×œ ×—×›× ×Anthropic</div>
                    </div>
                </div>
                <div class="ai-option" data-model="gemini">
                    <span class="ai-icon">âœ¨</span>
                    <div class="ai-info">
                        <div class="ai-name">Gemini</div>
                        <div class="ai-desc">××•×“×œ ×©×œ Google</div>
                    </div>
                </div>
            </div>
        </div>
    `;
}
```

### 5.4 ×¤×•× ×§×¦×™×™×ª askAI ××¨×›×–×™×ª - ×¢×“×™×¤×•×ª ×’×‘×•×”×” ğŸ¯
```javascript
// functions/index.js - ×¤×•× ×§×¦×™×” ××¨×›×–×™×ª ×—×“×©×”
exports.askAI = onCall({
  region: DEPLOY_REGION,
  secrets: [geminiApiKey, claudeApiKey, openaiApiKey]
}, async (request) => {
  console.log("ğŸ¯ askAI called - central AI router");
  
  // 1. Authentication
  if (!request.auth) {
    throw new HttpsError("unauthenticated", "Authentication required");
  }

  // 2. Extract data
  const { prompt, roomCode } = request.data;
  if (!prompt || !roomCode) {
    throw new HttpsError("invalid-argument", "Prompt and roomCode required");
  }

  // 3. Get room settings
  const roomRef = admin.firestore().collection('rooms').doc(roomCode);
  const roomDoc = await roomRef.get();
  
  if (!roomDoc.exists) {
    throw new HttpsError("not-found", "Room not found");
  }

  // 4. Select AI model
  const selectedModel = roomDoc.data().settings?.ai_model || 'chatgpt';
  console.log(`ğŸ¤– Using AI model: ${selectedModel}`);

  // 5. Route to specific function
  const modifiedRequest = { ...request, data: { prompt } };
  
  try {
    switch (selectedModel) {
      case 'chatgpt':
        return await exports.askChatGPT(modifiedRequest);
      case 'claude':
        return await exports.askClaude(modifiedRequest);
      case 'gemini':
        return await exports.askGemini(modifiedRequest);
      default:
        return await exports.askChatGPT(modifiedRequest);
    }
  } catch (error) {
    console.error(`âŒ ${selectedModel} failed:`, error);
    
    // Fallback to ChatGPT if selected model fails
    if (selectedModel !== 'chatgpt') {
      console.log("ğŸ”„ Falling back to ChatGPT");
      return await exports.askChatGPT(modifiedRequest);
    }
    throw error;
  }
});
```

---

## 6. ×¡×˜×˜×•×¡ ×”×¤×™×ª×•×— ×’×¨×¡×” 4.7

### âœ… ×”×•×©×œ×:
- [x] **××¨×›×™×˜×§×˜×•×¨×ª ×§×•×“×™ ×—×“×¨ 4 ×¡×¤×¨×•×ª:** ×™×¦×™×‘×” ×•××•×›×—×ª
- [x] **Teacher Dashboard ×‘×¡×™×¡×™:** ×××©×§ ××œ×
- [x] **Student App ×‘×¡×™×¡×™:** ××¤×œ×™×§×¦×™×” ××œ××”
- [x] **Firestore Rules:** ××‘×˜×—×” ××œ××”
- [x] **Cloud Functions ×‘××™×¨×•×¤×”:** ×¤×¨×•×¡×™× ×•×¤×•×¢×œ×™×
- [x] **Real-time Features:** ×”×›×œ ××ª×¢×“×›×Ÿ ××™×™×“×™×ª
- [x] **Chat & Content Control:** ×¢×•×‘×“ ××¦×•×™×Ÿ

### ğŸ”§ ×‘×¢×‘×•×“×” ×’×¨×¡×” 4.7:
- [ ] **×ª×™×§×•×Ÿ ×—×™×‘×•×¨ AI** - Remote Config ×“×™× ××™
- [ ] **×¤×•× ×§×¦×™×™×ª askAI ××¨×›×–×™×ª** - ×¨××•×˜×¨ ×—×›×
- [ ] **ChatGPT ×›×‘×¨×™×¨×ª ××—×“×œ** - ×¢×“×›×•×Ÿ ××œ×
- [ ] **×ª×¤×¨×™×˜ ×‘×—×™×¨×ª AI ×œ××•×¨×”** - ×××©×§ ××ª×§×“×
- [ ] **××—×™×§×ª Gemini ×Client** - × ×™×§×•×™ ×§×•×“

### ğŸ“‹ ×ª×•×›× ×™×•×ª ×’×¨×¡×” 4.7:
- [ ] **×¢×“×›×•×Ÿ Teacher Dashboard** - ×ª×¤×¨×™×˜ AI ××ª×§×“×
- [ ] **×¢×“×›×•×Ÿ ClassroomSDK** - askAI ×‘×œ×‘×“
- [ ] **×¢×“×›×•×Ÿ functions/index.js** - ×¨××•×˜×¨ ××¨×›×–×™
- [ ] **×‘×“×™×§×•×ª ××§×™×¤×•×ª** - ×›×œ ×”×–×¨×™××•×ª
- [ ] **×ª×™×¢×•×“ ××¢×•×“×›×Ÿ** - ×”×•×¨××•×ª ×©×™××•×©

---

## 7. ×”×•×¨××•×ª ×©×™××•×© ××¢×•×“×›× ×•×ª

### 7.1 ×œ××•×¨×” - ×’×¨×¡×” 4.7:
1. **×¤×ª×— ××ª** `index.html` **×‘×“×¤×“×¤×Ÿ** âœ…
2. **×”××ª×Ÿ ×œ×˜×¢×™× ×”** - ×”××¢×¨×›×ª ×ª×™×¦×•×¨ ×§×•×“ ×—×“×¨ ××•×˜×•××˜×™×ª âœ…
3. **×‘×—×¨ ××•×“×œ AI** - ğŸ†• ChatGPT/Claude/Gemini ××ª×¤×¨×™×˜ (ChatGPT ×‘×¨×™×¨×ª ××—×“×œ)
4. **×”×¢×ª×§ ××ª ×”×§×•×“** ×‘×¢×–×¨×ª ×›×¤×ª×•×¨ ×”×”×¢×ª×§×” âœ…
5. **×”×¢×‘×¨ ×œ×ª×œ××™×“×™×** ×‘×›×œ ×“×¨×š × ×•×—×” âœ…
6. **×”×ª×—×œ ×œ× ×”×œ** - ×©×œ×— ×ª×›× ×™× ×•×”×•×“×¢×•×ª + ğŸ†• ×©×œ×™×˜×” ×“×™× ××™×ª ×‘-AI

### 7.2 ×œ×ª×œ××™×“ - ×’×¨×¡×” 4.7:
1. **×¤×ª×— ××ª** `student-app.html` **×‘×“×¤×“×¤×Ÿ** âœ…
2. **×”×–×Ÿ ××ª ×©××š** ×‘×©×“×” ×”×¨××©×•×Ÿ âœ…
3. **×”×–×Ÿ ××ª ×§×•×“ ×”×—×“×¨** (4 ×¡×¤×¨×•×ª) âœ…
4. **×œ×—×¥ "×”×¦×˜×¨×£ ×œ×©×™×¢×•×¨"** âœ…
5. **×”×ª×—×œ ×œ×œ××•×“** - ×¦'××˜ ×¢×•×‘×“ âœ… + ğŸ†• AI ×œ×¤×™ ×‘×—×™×¨×ª ×”××•×¨×”

---

## 8. ×©×™× ×•×™×™× ×˜×›× ×™×™× ××¤×•×¨×˜×™×

### 8.1 ×¢×“×›×•× ×™× ×‘Client:
- **×”×¡×¨×ª ×§×¨×™××•×ª ×™×©×™×¨×•×ª ×œGemini** - ×¨×§ askAI
- **×”×•×¡×¤×ª roomCode ×œ×‘×§×©×•×ª AI** - ×œ×–×™×”×•×™ ×”×’×“×¨×•×ª
- **Remote Config ×“×™× ××™** - ×˜×¢×™× ×ª ×”×’×“×¨×•×ª ×‘×–××Ÿ ×××ª
- **×××©×§ ×‘×—×™×¨×ª AI ×œ××•×¨×”** - ×ª×¤×¨×™×˜ ××ª×§×“×

### 8.2 ×¢×“×›×•× ×™× ×‘Server:
- **askAI ×›×¤×•× ×§×¦×™×” ××¨×›×–×™×ª** - ×¨××•×˜×¨ ×—×›×
- **ChatGPT ×›×‘×¨×™×¨×ª ××—×“×œ** - ×‘××§×•× Gemini
- **×§×¨×™××ª ×”×’×“×¨×•×ª ×”×—×“×¨** - ×œ×›×œ ×‘×§×©×ª AI
- **×× ×’× ×•×Ÿ Fallback** - ChatGPT ×× ××•×“×œ ××—×¨ × ×›×©×œ

### 8.3 ×¢×“×›×•× ×™× ×‘Firestore:
- **×©×“×” ai_model ×—×“×©** - ×‘settings ×©×œ ×›×œ ×—×“×¨
- **×‘×¨×™×¨×ª ××—×“×œ ChatGPT** - ×‘×”×’×“×¨×•×ª ×”×¨××©×•× ×™×•×ª
- **Real-time sync** - ×¢×“×›×•×Ÿ ××™×™×“×™ ×œ×›×œ ×”×ª×œ××™×“×™×

---

## 9. ××¡×§× ×•×ª ×•××¡×¨ ×¡×™×›×•×

### âœ… ××” ×¢×•×‘×“ ××¦×•×™×Ÿ:
×”××¢×¨×›×ª ×”×‘×¡×™×¡×™×ª ×™×¦×™×‘×” ×œ×—×œ×•×˜×™×Ÿ. ×§×•×“×™ ×”×—×“×¨, ×”×¦'××˜, × ×™×”×•×œ ×”×ª×›× ×™×, ×•×›×œ ×”×ª×›×•× ×•×ª ×”×‘×¡×™×¡×™×•×ª ×¢×•×‘×“×•×ª ×œ×œ× ×‘×¢×™×•×ª.

### ğŸ”§ ××” ××¢×•×“×›×Ÿ ×‘×’×¨×¡×” 4.7:
- **AI ×“×™× ××™ ××ª×§×“×** - ××•×¨×” ×‘×•×—×¨ ××•×“×œ, ×›×•×œ× ××§×‘×œ×™×
- **ChatGPT ×¨××©×•×Ÿ** - ×‘×¨×™×¨×ª ××—×“×œ ×—×“×©×”
- **×ª×™×§×•×Ÿ ×—×™×‘×•×¨×™×** - ××™×¨×•×¤×” + Remote Config
- **×××©×§ ××ª×§×“×** - ×ª×¤×¨×™×˜ AI ×œ××•×¨×”

### ğŸ¯ ×”×™×¢×“:
××¢×¨×›×ª ××œ××” ×•×’××™×©×” ×©×‘×” ×”××•×¨×” ×©×•×œ×˜ ×‘-AI ×‘×¦×•×¨×” ×“×™× ××™×ª, ×›×œ ×”×ª×œ××™×“×™× ××§×‘×œ×™× ××ª ××•×ª×• ××•×“×œ, ×•×”×—×œ×¤×” ××ª×‘×¦×¢×ª ×‘×–××Ÿ ×××ª ×œ×œ× ×”×¤×¨×¢×•×ª.

---

**ğŸš€ Version 4.7 - ××¢×‘×¨ ×œAI ×“×™× ××™ ××ª×§×“× + ChatGPT ×›×‘×¨×™×¨×ª ××—×“×œ**